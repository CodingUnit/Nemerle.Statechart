using System;
using System.Linq;
using System.Console;
using System.Collections.Generic;
using System.Threading;
using Nemerle.Collections;
using Nemerle.Utility;

using Nemerle.Statechart;


namespace Nemerle.Statechart.Tests {


  partial class Test
  {       
    
    public Run() : void
    { 
      def (span, span2) = ExtLibDiffTest();
      //CoverTest();
      WriteLine($"Diff result of process two fsms $test_events_count events");
      WriteLine($"process time: old: $span2, new: $span, diff: {0:F4} times", (span2.Ticks : double) / span.Ticks);
      WriteLine("event send time average: old: {0} ticks, new: {1} ticks", (span2.Ticks : double) / test_events_count, (span.Ticks : double) / test_events_count);
      try
      {
        //FileFsmTest();
        //WriteLine("File fsm test passed!!!");
        PathCoverTest();
        WriteLine("Path cover fsm test passed!!!");
        WriteLine("All tests passed");
      }
      catch
      {
        | _ is InvalidOperationException => WriteLine("Test failed :(");
      }
      
    }
  }
  
  module Program
  {
            
    Main() : void
    {
      def test = Test();
      test.Run();
      _ = ReadLine();
    }
  }
}
