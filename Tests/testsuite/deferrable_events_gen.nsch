
  
  flags testing;
  
  name "coffee grinding with deferable events";
  
  state MachineIdle
  {
    turn_on => Preparing;
  }
  
  state Preparing
  {
    machine_ready / defer;
    do / grind_coffee;
    _ => Waiting;
  }
  
  state Waiting
  {
    machine_ready => Brewing;
  }
  
  state Brewing
  {
    do / brew_coffee;
    _ => MachineIdle;
  }
  
  